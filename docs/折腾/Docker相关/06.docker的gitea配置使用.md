## gitea安装

建立一个保存gitea的文件路径

```bash 
mkdir /home/data/gitea/data
mkdir /home/data/gitea/config
```

然后我们在`/home/data/gitea`文件夹下建立`docker-compose.yml`文件，由于我使用的是自建的网络，所以在生成容器前要建一个网络

```yml
version: "2"

services:
  server:
    container_name: gitea
    image: gitea/gitea:1.20.4-rootless
    restart: always
    volumes:
      - ./data:/var/lib/gitea
      - ./config:/etc/gitea
      - /etc/timezone:/etc/timezone:ro
      - /etc/localtime:/etc/localtime:ro
    ports:
      - "3000:3000"
      - "2222:2222"
    networks:
        - my_net

networks:
    my_net:
        name: lqh_net
```

然后在这个文件夹下执行命令，生成容器

```bash
docker-compose up -d
```

生成完成后，就可以在服务器上输入`IP:3000`，然后就可以看到生成的gitea服务了

## gitea简单使用

打开网页，首先选择数据库，可以选择SQLite3，但是我这里选择mysql，用的就是我在系列教程6中创建的mysql，我是把他们连接在一个网络上的，所以可以相互用容器名访问。

数据库主机就写前面的容器名加端口`mysql:3306`，数据库用户我这里用的root，数据库我写的gitea，这个数据库要提前建立好

下面的选项可以默认，也可以按需修改，我这里默认

如果想要自定义域名设置

修改./config/app.ini，把server中的下面3个选项修改

```
[server]
SSH_DOMAIN       = localhost #改为域名
DOMAIN           = localhost #改为域名
ROOT_URL         = localhost:3000 #改为域名加端口
```

